<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE queryservice PUBLIC "-//ANYFRAME//DTD QUERYSERVICE//EN" "http://www.anyframejava.org/dtd/anyframe-core-query-mapping-3.2.dtd">
<queryservice>
	<queries>
		<query id="createMovie" isDynamic="true" mappingStyle="upper">
			<statement>
				<![CDATA[
				INSERT INTO 
				MOVIE (MOVIE_ID, TITLE, DIRECTOR, GENRE_ID, ACTORS, RUNTIME, RELEASE_DATE, TICKET_PRICE, NOW_PLAYING, POSTER_FILE)
				VALUES (:MOVIE_ID, :TITLE, :DIRECTOR, :GENRE_ID, :ACTORS, :RUNTIME, :RELEASE_DATE, :TICKET_PRICE, :NOW_PLAYING, :POSTER_FILE)
				]]>
			</statement>
		</query>

		<query id="updateMovie" isDynamic="true" mappingStyle="upper">
			<statement>
				<![CDATA[
				UPDATE MOVIE
				SET 
					TITLE = :TITLE, 
					DIRECTOR = :DIRECTOR,
					GENRE_ID = :GENRE_ID, 
					ACTORS = :ACTORS, 
					RUNTIME = :RUNTIME, 
					RELEASE_DATE = :RELEASE_DATE,   
					TICKET_PRICE = :TICKET_PRICE, 
					NOW_PLAYING = :NOW_PLAYING
				WHERE
					MOVIE_ID = :MOVIE_ID
				]]> 
			</statement>
		</query>

		<query id="removeMovie" isDynamic="true" mappingStyle="upper">
			<statement>
				<![CDATA[	
				DELETE FROM MOVIE 
				WHERE 
					MOVIE_ID = :MOVIE_ID
					]]>
			</statement>
		</query>

		<query id="findMovieByPk" isDynamic="true" mappingStyle="upper">
			<statement>
			<![CDATA[
				SELECT 
					MOVIE_ID, TITLE, DIRECTOR, GENRE_ID, ACTORS, RUNTIME, RELEASE_DATE, TICKET_PRICE, NOW_PLAYING, POSTER_FILE
				FROM MOVIE
				WHERE 
					MOVIE_ID = :MOVIE_ID
					]]>
			</statement>
		</query>

		<query id="findMovieList" isDynamic="true" mappingStyle="upper">
			<statement>
			<!--mip-query-findMovieList-START-->
				<![CDATA[
				SELECT 
					MOVIE_ID, TITLE, DIRECTOR, GENRE_ID, ACTORS, RUNTIME, RELEASE_DATE, TICKET_PRICE, NOW_PLAYING, POSTER_FILE
				FROM MOVIE
				WHERE 		
					TITLE like '%' || :SEARCH_TITLE || '%'
					AND	NOW_PLAYING = :SEARCH_NOW_PLAYING 
				ORDER BY RELEASE_DATE DESC
				]]>
			<!--mip-query-findMovieList-END-->
			</statement>
		</query>
	</queries>
</queryservice>



